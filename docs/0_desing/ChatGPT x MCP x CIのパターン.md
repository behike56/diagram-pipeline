# ChatGPT x MCP x CIのパターン

## ChatGPTを利用する MCP を CI 的にどう設計できるか

| #     | 形態                                  | 主導者                        | 主な用途                            | 導入難易度  | CI との連携度  | 典型ツール例                       | メリット                    | 注意点                 |
| ----- | ----------------------------------- | -------------------------- | ------------------------------- | ------ | --------- | ---------------------------- | ----------------------- | ------------------- |
| **1** | **人間主導型 CI 補助 MCP**                 | 開発者（ChatGPT から実行）          | 手動での UML 生成・レビュー補助              | **低い** | 低〜中       | UML 生成、ログ要約                  | 最も手軽。MCP の通常利用だけで成立     | 完全自動化には向かない         |
| **2** | **CI パイプライン内で MCP/ChatGPT を呼ぶ**     | CI サーバ (GitHub Actions など) | PR コメント自動生成、レビュー補助              | 中      | **高い**    | diff 解析、レビュー文生成              | CI が自動で ChatGPT を活用できる  | API 経路管理（認証・安定性）が必要 |
| **3** | **自動ドキュメント / ダイアグラム生成 CI**          | CI                         | UML/SVG などの自動生成、整合性チェック         | 中      | **非常に高い** | generate_uml, check_diagram  | ドキュメント常に最新・自動化          | 図生成の安定度確保が必要        |
| **4** | **コード/デザインレビュー Bot（Webhook + MCP）** | PR イベント                    | PR 作成時の自動レビューコメント               | 中〜高    | 高い        | review_diff, review_design   | レビュー負荷軽減、Bot が PR に投稿   | Bot 用のサーバ維持が必要      |
| **5** | **品質ゲートとしての MCP**                   | CI                         | レポート解析、ChatGPT による pass/fail 判定 | 中〜高    | **非常に高い** | evaluate_quality             | 多次元レポートを自然言語ルールで評価      | 判定の再現性確保の工夫が必要      |
| **6** | **Stateless MCP（CIとの相性◎）**          | 双方                         | すべての入力を毎回渡す                     | **低い** | 高い        | どのツールにも応用可                   | 再実行性が高い・シンプル            | 大規模入力だと毎回重くなる       |
| **7** | **Stateful MCP（設計スナップショット保持）**      | ChatGPT & CI               | 設計の履歴管理、図の一貫性維持                 | 高い     | 中〜高       | diagram_store, snapshot_diff | ChatGPT と CI が同じ設計状態を共有 | ストレージとバージョン管理が必要    |

## 目的別

| 目的                       | 最適案       |
| ------------------------ | --------- |
| ChatGPT から設計作業の自動化をしたい   | **1**     |
| CI が自動でレビュー生成してほしい       | **2 / 4** |
| 図を常に最新にし、設計とコードの乖離をなくしたい | **3**     |
| CI で自然言語品質基準に基づく合否判定をしたい | **5**     |
| プロジェクトの設計知識を蓄積したい        | **7**     |
| シンプル・再実行性重視              | **6**     |
